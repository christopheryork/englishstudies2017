# a little carrot-and-stick...
osascript -e "display notification \"$(detex -t main.tex | wc -w)\" with title \"Word Count @ $(date +'%H:%M')\""

cd viz
make default
cd ..

rm -rf .tmp-compiling
mkdir .tmp-compiling
mkdir .tmp-compiling/viz
mkdir .tmp-compiling/steps

cd .tmp-compiling
cp ../main.bib .
cp ../viz/*.pdf viz/
cp ../steps/* steps/

pdflatex ../main.tex
bibtex main
pdflatex ../main.tex
pdflatex ../main.tex

cp main.pdf ..

cd ..
rm -rf .tmp-compiling
